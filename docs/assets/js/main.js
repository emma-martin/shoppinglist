"use strict";const list=document.querySelector(".ingredients-list"),subtotalEl=document.querySelector(".cost__subtotal"),shippingEl=document.querySelector(".cost__shipping"),totalEl=document.querySelector(".cost__total"),checkBtn=document.querySelector(".btn--check"),uncheckBtn=document.querySelector(".btn--uncheck"),currency="€";function createElement(e,t){const n=document.createElement(e);return n.classList.add(t),n}function createText(e){return document.createTextNode(e)}function addTextToElement(e,t,n){const c=createElement(e,t),l=createText(n);return c.appendChild(l),c}function createInputType(e,t,n,c,l,i){const r=createElement("div",e),o=createElement("label","label-input"),s=createElement("input",t);return o.setAttribute("for",c.replace(/\s+/g,"")),s.setAttribute("type",n),s.setAttribute("id",c.replace(/\s+/g,"")),s.setAttribute("name",l),void 0!==i&&(s.setAttribute("value",i),s.setAttribute("Min",0)),r.appendChild(s),r.appendChild(o),r}function createInputBox(e,t,n){const c=createElement("div",e),l=createInputType("checkbox-wrapper","list--input__checkbox","checkbox",t,t);l.addEventListener("click",getCheckeds);const i=createInputType("input-number-wrapper","list--input__number","number",t,t,1),r=addTextToElement("p","ingredients-list__price",n);return c.appendChild(l),c.appendChild(i),c.appendChild(r),i.addEventListener("change",getCheckeds),c}function getRecipe(){const e=JSON.parse(localStorage.getItem("recipe"));null!==e?paint(e):fetchElements()}function fetchElements(){fetch("https://raw.githubusercontent.com/Adalab/recipes-data/master/rissoto-setas.json").then(e=>e.json()).then(function(e){const t=e.recipe.ingredients;localStorage.setItem("recipe",JSON.stringify(t)),paint(t)}).catch(function(e){console.log("error",e)})}function paint(e){for(let t=0;t<e.length;t++){let n=e[t].product,c=e[t].brand,l=addTextToElement("p","ingredients-list__brand",c=void 0===c?"":e[t].brand),i=e[t].quantity,r=`${e[t].price} ${currency}`;const o=addTextToElement("h4","ingredients-list__name",n),s=addTextToElement("p","ingredients-list__qty",i),d=createElement("li","ingredients-list__item"),u=createInputBox("all-input-wrapper",n,r);d.appendChild(o),d.appendChild(l),d.appendChild(s),d.appendChild(u),list.appendChild(d)}}function getCheckeds(){const e=document.querySelectorAll(".list--input__checkbox");let t=document.querySelectorAll(".list--input__number"),n=document.querySelectorAll(".ingredients-list__price"),c=0;for(let l=0;l<e.length;l++)if(!0===e[l].checked){let e=t[l].value,i=n[l].innerText.replace(" €","");const r=(parseFloat(i)*e).toFixed(2);c+=parseFloat(r)}const l=parseFloat(c),i=l.toFixed(2);subtotalEl.innerHTML=`Subtotal ${i} euros`;shippingEl.innerHTML="Gastos de envio: 7 euros";const r=`El coste total es ${(l+7).toFixed(2)} euros`;totalEl.innerHTML=`${r}`}function selectAllItems(){const e=document.querySelectorAll(".list--input__checkbox");for(let t=0;t<e.length;t++)e[t].checked=!0;getCheckeds()}function unSelectAllItems(){const e=document.querySelectorAll(".list--input__checkbox");for(let t=0;t<e.length;t++)e[t].checked=!1;getCheckeds()}getRecipe(),checkBtn.addEventListener("click",selectAllItems),checkBtn.addEventListener("click",getCheckeds),uncheckBtn.addEventListener("click",unSelectAllItems);