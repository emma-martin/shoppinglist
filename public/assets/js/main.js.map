{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["'use strict';\nconst list = document.querySelector('.ingredients-list');\nconst subtotalEl = document.querySelector('.cost__subtotal');\nconst shippingEl = document.querySelector('.cost__shipping');\nconst totalEl = document.querySelector('.cost__total');\nconst checkBtn = document.querySelector('.btn--check');\nconst uncheckBtn = document.querySelector('.btn--uncheck');\n\nconst currency = '€';\n\nfunction createElement(tag, classEl) {\n  const newElement = document.createElement(tag);\n  newElement.classList.add(classEl);\n  return newElement;\n}\n\nfunction createText(text) {\n  const newText = document.createTextNode(text);\n  return newText;\n}\n\nfunction addTextToElement(tag, classEl, text) {\n  const elementCreated = createElement(tag, classEl);\n  const textCreated = createText(text);\n  elementCreated.appendChild(textCreated);\n  return elementCreated;\n}\n\nfunction createInputType(classDiv, classEl, type, id, name, value) {\n  const inputWrapper = createElement('div', classDiv);\n  const newInputLabel = createElement('label', 'label-input');\n  const newInputForm = createElement('input', classEl);\n  newInputLabel.setAttribute('for', id.replace(/\\s+/g, ''));\n  newInputForm.setAttribute('type', type);\n  newInputForm.setAttribute('id', id.replace(/\\s+/g, ''));\n  newInputForm.setAttribute('name', name);\n  if (value !== undefined) {\n    newInputForm.setAttribute('value', value);\n    newInputForm.setAttribute('Min', 0);\n  }\n  inputWrapper.appendChild(newInputForm);\n  inputWrapper.appendChild(newInputLabel);\n  return inputWrapper;\n}\n\nfunction createInputBox(classDiv, productNames, priceCurrency) {\n  const inputWrapper = createElement('div', classDiv);\n  const newCheckbox = createInputType('checkbox-wrapper','list--input__checkbox', 'checkbox', productNames, productNames);\n  newCheckbox.addEventListener('click', getCheckeds);\n  const defaultQty = 1;\n  const newInputNumber = createInputType('input-number-wrapper','list--input__number', 'number', productNames, productNames, defaultQty);\n  const appendPrice = addTextToElement('p', 'ingredients-list__price', priceCurrency);\n  inputWrapper.appendChild(newCheckbox);\n  inputWrapper.appendChild(newInputNumber);\n  inputWrapper.appendChild(appendPrice);\n  newInputNumber.addEventListener('change', getCheckeds);\n  return inputWrapper;\n}\n\n\n\nfunction getRecipe() {\n  const recipeFromLS = JSON.parse(localStorage.getItem('recipe'));\n  if (recipeFromLS !== null) {\n    paint(recipeFromLS);\n  } else {\n    fetchElements();\n  }\n}\n\nfunction fetchElements() {\n  fetch('https://raw.githubusercontent.com/Adalab/recipes-data/master/rissoto-setas.json')\n    .then(response => response.json())\n    .then(function (data) {\n      const dataArray = data.recipe.ingredients;\n      localStorage.setItem('recipe', JSON.stringify(dataArray));\n      paint(dataArray);\n    })//end of data processing\n    .catch(function (error) { console.log('error', error); });\n}//end of fetch function\n\ngetRecipe();\n\nfunction paint(dataArray) {\n  for (let i = 0; i < dataArray.length; i++) {\n    let productNames = dataArray[i].product;\n    let productBrands = dataArray[i].brand;\n    if (productBrands === undefined) {\n      productBrands = '';\n    }\n    else {\n      productBrands = dataArray[i].brand;\n    }\n    let appendBrands = addTextToElement('p', 'ingredients-list__brand', productBrands);\n    let productQty = dataArray[i].quantity;\n    let priceItem = dataArray[i].price;\n    let priceCurrency = `${priceItem} ${currency}`;\n    const appendNames = addTextToElement('h4', 'ingredients-list__name', productNames);\n    const appendQty = addTextToElement('p', 'ingredients-list__qty', productQty);\n    const liItem = createElement('li', 'ingredients-list__item');\n    const wrappedInputs = createInputBox('all-input-wrapper', productNames, priceCurrency);\n    liItem.appendChild(appendNames);\n    liItem.appendChild(appendBrands);\n    liItem.appendChild(appendQty);\n    liItem.appendChild(wrappedInputs);\n    list.appendChild(liItem);\n  }//end of for loop\n}\n\nfunction getCheckeds() {\n  const checkBox = document.querySelectorAll('.list--input__checkbox');\n  let checkInput = document.querySelectorAll('.list--input__number');\n  let checkPrice = document.querySelectorAll('.ingredients-list__price');\n  let sum = 0;\n  for (let i = 0; i < checkBox.length; i++) {\n    if (checkBox[i].checked === true) {\n      let inputValueNum = checkInput[i].value;\n      let priceStr = checkPrice[i].innerText.replace(' €', '');\n      let priceNum = parseFloat(priceStr);\n      let mult = (priceNum * inputValueNum);\n      const multFixed = mult.toFixed(2);\n      const multParse = parseFloat(multFixed);\n      sum += multParse;\n    }\n  }\n  const totalSumNum = parseFloat(sum);\n  const totalSumParsed = totalSumNum.toFixed(2);\n  subtotalEl.innerHTML = `Subtotal ${totalSumParsed} euros`;\n  const shipping = 7;\n  shippingEl.innerHTML = `Gastos de envio: ${shipping} euros`;\n  const totalCost = totalSumNum + shipping;\n  const totalPriceFixed = totalCost.toFixed(2);\n  const totalCostDetail = `El coste total es ${totalPriceFixed} euros`;\n  totalEl.innerHTML = `${totalCostDetail}`;\n}\n\nfunction selectAllItems() {\n  const checkBox = document.querySelectorAll('.list--input__checkbox');\n  for (let i = 0; i < checkBox.length; i++) {\n    checkBox[i].checked = true;\n  }\n  getCheckeds();\n}\n\nfunction unSelectAllItems() {\n  const checkBox = document.querySelectorAll('.list--input__checkbox');\n  for (let i = 0; i < checkBox.length; i++) {\n    checkBox[i].checked = false;\n  }\n  getCheckeds();\n}\n\ncheckBtn.addEventListener('click', selectAllItems);\ncheckBtn.addEventListener('click', getCheckeds);\nuncheckBtn.addEventListener('click', unSelectAllItems);\n\n\n"]}